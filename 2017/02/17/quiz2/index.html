<!doctype html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="C,UIUC," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="ProcessesOverview
A process is program that is running (kinda). A process is also just one instance of that computer program running. Processes have a lot of things at their disposal. At the start of">
<meta property="og:type" content="article">
<meta property="og:title" content="CS241 - Quiz 2">
<meta property="og:url" content="http://hottasho.github.io/2017/02/17/quiz2/index.html">
<meta property="og:site_name" content="Hotta Sho Blog">
<meta property="og:description" content="ProcessesOverview
A process is program that is running (kinda). A process is also just one instance of that computer program running. Processes have a lot of things at their disposal. At the start of">
<meta property="og:image" content="http://hottasho.github.io/2017/02/17/quiz2/memory_struct.jpg">
<meta property="og:updated_time" content="2017-02-18T06:32:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CS241 - Quiz 2">
<meta name="twitter:description" content="ProcessesOverview
A process is program that is running (kinda). A process is also just one instance of that computer program running. Processes have a lot of things at their disposal. At the start of">
<meta name="twitter:image" content="http://hottasho.github.io/2017/02/17/quiz2/memory_struct.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://hottasho.github.io/2017/02/17/quiz2/"/>





  <title> CS241 - Quiz 2 | Hotta Sho Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hotta Sho Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">A Computer Science blog</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://hottasho.github.io/2017/02/17/quiz2/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Mark Craft">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hotta Sho Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hotta Sho Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                CS241 - Quiz 2
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-17T00:00:00-06:00">
                2017-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CS241/" itemprop="url" rel="index">
                    <span itemprop="name">CS241</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Processes"><a href="#Processes" class="headerlink" title="Processes"></a>Processes</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><blockquote>
<p>A process is program that is running (kinda). A process is also just one instance of that computer program running. Processes have a lot of things at their disposal. At the start of each program you get one process, but each program can make more processes. In fact, your operating system starts up with only one process and all other processes are forked off of that – all of that is done under the hood when booting up.</p>
</blockquote>
<h2 id="In-the-beginning"><a href="#In-the-beginning" class="headerlink" title="In the beginning"></a>In the beginning</h2><blockquote>
<p>When your operating system starts on a linux machine, there is a process called init.d that gets created. That process is a special one handling signals, interrupts, and a persistence module for certain kernel elements. Whenever you want to make a new process, you call fork (to be discussed in a later section) and use another function to load another program.</p>
</blockquote>
<h1 id="What-to-study"><a href="#What-to-study" class="headerlink" title="What to study"></a>What to study</h1><h2 id="Topics"><a href="#Topics" class="headerlink" title="Topics:"></a>Topics:</h2><ul>
<li>Correct use of fork, exec and waitpid</li>
<li>Using exec with a path</li>
<li>Understanding what fork and exec and waitpid do. E.g. how to use their return values</li>
<li>SIGKILL vs SIGSTOP vs SIGINT.</li>
<li>What signal is sent when you press CTRL-C</li>
<li>Using kill from the shell or the kill POSIX call.</li>
<li>Process memory isolation.</li>
<li>Process memory layout (where is the heap, stack etc; invalid memory addresses).</li>
<li>What is a fork bomb, zombie and orphan? How to create/remove them.</li>
<li>getpid vs getppid</li>
<li>How to use the WAIT exit status macros WIFEXITED etc.</li>
</ul>
<h2 id="Questions-Exercises"><a href="#Questions-Exercises" class="headerlink" title="Questions/Exercises"></a>Questions/Exercises</h2><ul>
<li>What is the difference between execs with a p and without a p? What does the operating system</li>
<li>How do you pass in command line arguments to execl<em>? How about execv</em>? What should be the first command line argument by convention?</li>
<li>How do you know if exec or fork failed?</li>
<li>What is the int *status pointer passed into wait? When does wait fail?</li>
<li>What are some differences between SIGKILL, SIGSTOP, SIGCONT, SIGINT? What are the default behaviors? Which ones can you set up a signal handler for?</li>
<li>What signal is sent when you press CTRL-C?</li>
<li>My terminal is anchored to PID = 1337 and has just become unresponsive. Write me the terminal command and the C code to send SIGQUIT to it.</li>
<li>Can one process alter another processes memory through normal means? Why?</li>
<li>Where is the heap, stack, data, and text segment? Which segments can you write to? What are invalid memory addresses?</li>
<li>Code me up a fork bomb in C (please don’t run it).</li>
<li>What is an orphan? How does it become a zombie? How do I be a good parent?</li>
<li>Don’t you hate it when your parents tell you that you can’t do something? Write me a program that sends SIGSTOP to your parent.</li>
<li>Write a function that fork exec waits an executable, and using the wait macros tells me if the process exited normally or if it was signaled. If the process exited normally, then print that with the return value. If not, then print the signal number that caused the process to terminate.</li>
</ul>
<hr>
<h1 id="Answers"><a href="#Answers" class="headerlink" title="Answers"></a>Answers</h1><h2 id="Memory-Layout"><a href="#Memory-Layout" class="headerlink" title="Memory Layout"></a>Memory Layout</h2><p><img src="/2017/02/17/quiz2/memory_struct.jpg" alt="ScreenShot"></p>
<ul>
<li><strong>A Stack</strong>. The Stack is the place where automatic variable and function call return addresses are stored. Every time a new variable is declared, the program moves the stack pointer down to reserve space for the variable. This segment of the stack is Writable but not executable. If the stack grows too far (meaning that it either grows beyond a preset boundary or intersects the heap) you will get a stackoverflow most likely resulting in a SEGFAULT or something similar. <strong>The stack is statically allocated by default meaning that there is only a certain amount of space to which one can write</strong></li>
<li><strong>A Heap</strong>. The heap is an expanding region of memory. If you want to allocate a large object, it goes here. The heap starts at the top of the text segment and grows upward (meaning sometimes when you call malloc that it asks the operating system to push the heap boundary upward). This area is also Writable but not Executable. One can run out of heap memory if the system is constrained or if you run out of addresses (more common on a 32bit system).</li>
<li><strong>A Data Segment</strong> This contains all of your globals. This section starts at the end of the Text segment and is static in size because the amount of globals is known at compile time. This section is Writable but not Executable and there isn’t anything else too fancy here.</li>
<li><strong>A Text Segment</strong>. This is, arguably, the most important section of the address. This is where all your code is stored. Since assembly compiles to 1’s and 0’s, this is where the 1’s and 0’s get stored. The program counter moves through this segment executing instructions and moving down the next instruction. It is important to note that this is the only Executable section of the code. If you try to change the code while it’s running, most likely you will segfault (there are ways around it but just assume that it segfaults).</li>
<li>Why doesn’t it start at zero? It is outside the scope of this class but it is for security.</li>
</ul>
<h2 id="Fork-Exec-Wait"><a href="#Fork-Exec-Wait" class="headerlink" title="Fork-Exec-Wait"></a>Fork-Exec-Wait</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">pid_t</span> pid = fork();</div><div class="line"></div><div class="line"><span class="keyword">if</span> (pid == <span class="number">-1</span>) &#123;</div><div class="line">	<span class="comment">// fork failed</span></div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123;</div><div class="line">	<span class="comment">// child process</span></div><div class="line">	exec(...)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	<span class="comment">// parent process</span></div><div class="line">	wait(pid);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The list of exec commands:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* execute the file in the current directory */</span></div><div class="line">execl( path, arg, ... )</div><div class="line"></div><div class="line"><span class="comment">/* executes a file only searching in the path */</span></div><div class="line">execlp( path, arg, ... )</div><div class="line"></div><div class="line"><span class="comment">/* execute the file in path + environment settings */</span></div><div class="line">execle( path, arg, ..., envp[] )</div><div class="line"></div><div class="line"><span class="comment">/* execute the file in current directory */</span></div><div class="line">execv( path, argv[] )</div><div class="line"></div><div class="line"><span class="comment">/* execute the file in the path only */</span></div><div class="line">execvp( file, argv[] )</div><div class="line"></div><div class="line"><span class="comment">/* environment settings */</span></div><div class="line">execvpe( file, argv[], envp[] )</div></pre></td></tr></table></figure></p>
<h2 id="SIGNALS"><a href="#SIGNALS" class="headerlink" title="SIGNALS"></a>SIGNALS</h2><p><strong>SIGKILL</strong></p>
<blockquote>
<p>THE SIGKILL signal is sent to a process to cause it to terminate immediately (kill).  In contrast to SIGTERM and SIGINT, this signal cannot be caught or ignored, and the receiving process cannot perform any clean-up upon receiving this signal</p>
</blockquote>
<p><strong>SIGINT</strong></p>
<blockquote>
<p>The SIGINT signal is sent to a process by its controlling terminal when a user wishes to interrupt the process. This is typically initiated by pressing Ctrl+C.</p>
</blockquote>
<p><strong>SIGSTOP</strong></p>
<blockquote>
<p>The SIGSTOP signal instructs the operating system to stop a process for later resumption.</p>
</blockquote>
<p><strong>SIGCONT</strong></p>
<blockquote>
<p>The SIGCONT signal instructs the operating system to continue (restart) a process previously paused by the SIGSTOP or SIGTSTP signal. One important use of this signal is in job control in the Unix shell.</p>
</blockquote>
<p><strong>Some additional important signals (not tested):</strong></p>
<p><strong>SIGCHLD</strong></p>
<blockquote>
<p>The SIGCHLD signal is sent to a process when a child process terminates, is interrupted, or resumes after being interrupted. One common usage of the signal is to instruct the operating system to clean up the resources used by a child process after its termination without an explicit call to the wait system call.</p>
</blockquote>
<p><strong>SIGSEGV</strong></p>
<blockquote>
<p>The SIGSEGV signal is sent to a process when it makes an invalid virtual memory reference, or segmentation fault, i.e. when it performs a segmentation violation.</p>
</blockquote>
<h2 id="Forking"><a href="#Forking" class="headerlink" title="Forking"></a>Forking</h2><p><strong>Warning</strong></p>
<blockquote>
<p>Process forking is a very powerful (and very dangerous) tool. If you mess up and cause a fork bomb, you can bring down the entire system. To reduce the chances of this, limit your maximum number of processes to a small number e.g 40 by typing <strong>ulimit -u 40</strong> into a command line. Note that this limit is only for the user, which means if you fork bomb, then you won’t be able to kill all of the processes you just created since calling <strong>killall</strong> requires your shell to fork() … ironic right? So what can we do about this. One solution is to spawn another shell instance as another user (for example root) before hand and kill processes from there. Another is to use the built in exec command to kill all the user processes (careful you only have one shot at this)</p>
</blockquote>
<p><strong>Overview</strong></p>
<blockquote>
<p>The <strong>fork</strong> system call clones the current process to create a new process. It creates a new process (the child process) by duplicating the state of the existing process with a few minor differences (discussed below). The child process does not start from main. Instead it returns from <strong>fork()</strong> just as the parent process does.</p>
</blockquote>
<p><strong>Fork bomb</strong><br>A ‘fork bomb’ is when you attempt to create an infinite number of processes. A simple example is shown below:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (<span class="number">1</span>) fork();</div></pre></td></tr></table></figure></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/C/" rel="tag"># C</a>
          
            <a href="/tags/UIUC/" rel="tag"># UIUC</a>
          
        </div>
      

      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Mark Craft" />
          <p class="site-author-name" itemprop="name">Mark Craft</p>
          <p class="site-description motion-element" itemprop="description">To-do</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Processes"><span class="nav-number">1.</span> <span class="nav-text">Processes</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">1.1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#In-the-beginning"><span class="nav-number">1.2.</span> <span class="nav-text">In the beginning</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#What-to-study"><span class="nav-number">2.</span> <span class="nav-text">What to study</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Topics"><span class="nav-number">2.1.</span> <span class="nav-text">Topics:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Questions-Exercises"><span class="nav-number">2.2.</span> <span class="nav-text">Questions/Exercises</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Answers"><span class="nav-number">3.</span> <span class="nav-text">Answers</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Memory-Layout"><span class="nav-number">3.1.</span> <span class="nav-text">Memory Layout</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fork-Exec-Wait"><span class="nav-number">3.2.</span> <span class="nav-text">Fork-Exec-Wait</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SIGNALS"><span class="nav-number">3.3.</span> <span class="nav-text">SIGNALS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Forking"><span class="nav-number">3.4.</span> <span class="nav-text">Forking</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mark Craft</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  




  
  

  

  

  

  


</body>
</html>
